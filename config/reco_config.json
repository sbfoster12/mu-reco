{
  
  "Unpacker" : {
    "max_midas_events": 10,
    "verbosity": 0
  },
  "RecoStages": [
    {
      "recoClass": "reco::WaveformInitializer",
      "recoLabel": "initializer",
      "inputRecoLabel": "unpacker",
      "inputWaveformsLabel": "WFD5WaveformCollection",
      "outputWaveformsLabel": "waveforms",
      "failOnError":false,
      "debug":false
    },
    {
      "recoClass": "reco::JitterCorrector",
      "recoLabel": "jitter",
      "inputRecoLabel": "initializer",
      "inputWaveformsLabel": "waveforms",
      "outputWaveformsLabel": "waveforms",
      "templateServiceLabel": "templates",
      "pedestals_iov":"pedestals_iov.json",
      "failOnError":false,
      "debug":false
    },
    {
      "recoClass": "reco::EmptyChannelPruner",
      "recoLabel": "pruned",
      "inputRecoLabel": "jitter",
      "inputWaveformsLabel": "waveforms",
      "outputWaveformsLabel": "waveforms",
      "minAmplitude":25.0,
      "file_name":"minimum_amplitudes.json",
      "keepChannels":[
        [8,1,2],
        [8,1,4]
      ],
      "failOnError":false,
      "debug":false
    },
    {
      "recoClass": "reco::PedestalCalculator",
      "recoLabel": "pedestal",
      "inputRecoLabel": "pruned",
      "inputWaveformsLabel": "waveforms",
      "outputWaveformsLabel": "waveforms",
      "pedestalMethod" : "FirstN",
      "numSamples": 10
    },
    {
      "recoClass": "reco::T0Processor",
      "recoLabel": "t0PeakLocator",
      "inputRecoLabel": "pedestal",
      "inputWaveformsLabel": "waveforms",
      "outputWaveformsLabel": "t0",
      "failOnError":false,
      "defaultTime":0,
      "debug":false,
      "triggerWindowLow":50,
      "triggerWindowHigh":150
    },
    {
      "recoClass": "reco::DigitizerTimeAligner",
      "recoLabel": "timeAligned",
      "inputRecoLabel": "pedestal",
      "inputWaveformsLabel": "waveforms",
      "outputWaveformsLabel": "waveforms",
      "inputT0Reco":"t0PeakLocator",
      "inputT0Label": "t0",
      "requireT0Seed":false,
      "debug":false
    },
    {
      "recoClass": "reco::DetectorGrouper",
      "recoLabel": "grouped",
      "inputRecoLabel": "pedestal",
      "inputWaveformsLabel": "waveforms",
      "outputWaveformsBaseLabel": "waveforms",
      "channelMapServiceLabel": "channelMap"
    },
    {
      "recoClass": "reco::Fitter",
      "recoLabel": "xtalFitter",
      "inputRecoLabel": "grouped",
      "inputWaveformsLabel": "waveformsXtal",
      "outputFitResultLabel": "fitResults",
      "templateFitterLabel": "templateFitter",
      "debug": false
    },
    {
      "recoClass": "reco::RFFitter",
      "recoLabel": "RFFitter",
      "inputRecoLabel": "grouped",
      "inputWaveformsLabel": "waveformsRF",
      "outputFitResultLabel": "RFfitResults",
      "fitStartTime": 200,
      "fitEndTime": 800,
      "frequency": 0.39768,
      "fixedFrequency": true,
      "fitOption": "RQ"
    },
    {
      "recoClass": "reco::PulseIntegrator",
      "recoLabel": "xtalIntegrator",
      "inputRecoLabel": "grouped",
      "inputWaveformsLabel": "waveformsXtal",
      "outputIntegralsLabel": "integrals",
      "debug":false,
      "file_name":"integrators.json",
      "nPresamples":25,
      "windowLength":100,
      "strategy":1
    },
    {
      "recoClass": "reco::PeakIdentifier",
      "recoLabel": "xtalPeakIdentifier",
      "inputRecoLabel": "grouped",
      "inputWaveformsLabel": "waveformsXtal",
      "outputPeaksLabel": "Peaks"
    },
    {
      "recoClass": "reco::EnergyCalibration",
      "recoLabel": "xtalIntegralEnergyCalibrator",
      "inputRecoLabel": "xtalIntegrator",
      "inputWaveformsLabel": "integrals",
      "outputPeaksLabel": "integralsCalibrated",
      "integrals":true,
      "failOnError":false,
      "energy_calibration_iov":"energy_calibration_iov.json",
      "debug":false
    },
    {
      "recoClass": "reco::EnergyCalibration",
      "recoLabel": "xtalFitEnergyCalibrator",
      "inputRecoLabel": "xtalFitter",
      "inputWaveformsLabel": "fitResults",
      "outputPeaksLabel": "fitResultsCalibrated",
      "integrals":false,
      "failOnError":false,
      "energy_calibration_iov":"energy_calibration_iov.json",
      "debug":false
    },
    {
      "recoClass": "reco::CaloClusterFinder",
      "recoLabel": "xtalCaloClusterFinder",
      "inputRecoLabel": "xtalFitter",
      "inputfitResultsLabel": "fitResults",
      "outputCaloClusterLabel": "CaloClusters"
    },
    {
      "recoClass": "reco::TimeSeeder",
      "recoLabel": "exampleTimeSeeder",
      "outputSeedLabel": "seed",
      "inputRecoLabel": "xtalFitter",
      "inputFitResultsLabel": "fitResults",
      "debug":false,
      "seedFromConfig":true,
      "defaultSeed": 100.0
    },
    {
      "recoClass": "reco::Fitter",
      "recoLabel": "xtalFitterSeeded",
      "inputRecoLabel": "grouped",
      "inputWaveformsLabel": "waveformsXtal",
      "outputFitResultLabel": "fitResults",
      "templateFitterLabel": "templateFitter",
      "debug": false,
      "seeded": true,
      "seededExtraLeeway":true,
      "intputSeededTime":"exampleTimeSeeder",
      "intputSeededTimeLabel":"seed"
    },
    {
      "recoClass": "reco::XYPositionFinder",
      "recoLabel": "xtalXYPositionFinderFit",
      "inputRecoLabel": "xtalFitter",
      "inputFitResultsLabel": "fitResults",
      "outputPositionLabel": "XYPositionsFit",
      "integrals":false,
      "useFirstFitInTime":true,
      "debug":false
    },
    {
      "recoClass": "reco::XYPositionFinder",
      "recoLabel": "xtalXYPositionFinderIntegral",
      "inputRecoLabel": "xtalIntegrator",
      "inputFitResultsLabel": "integrals",
      "outputPositionLabel": "XYPositionsIntegral",
      "integrals":true,
      "debug":false
    },
    {
      "recoClass": "reco::EndOfEventAnalysis",
      "recoLabel": "endOfEventAnalysis",
      "lysoRecoLabel": "grouped",
      "lysoWaveformsLabel": "waveformsXtal"
    }
  ],
  "_RecoPath":[],
  "RecoPath":[
    "initializer",
    "jitter",
    "pruned",
    "pedestal",
    "t0PeakLocator",
    "timeAligned",
    "grouped",
    "xtalIntegrator",
    "xtalFitter",
    "xtalIntegralEnergyCalibrator",
    "xtalFitEnergyCalibrator",
    "xtalXYPositionFinderFit",
    "xtalXYPositionFinderIntegral",
    "exampleTimeSeeder",
    "xtalFitterSeeded",
    "endOfEventAnalysis"
  ],
  "RecoManager": {
    "timeProfilerLabel": "timeProfiler"
  },
  "ServiceManager": {
  },
  "Services": [
    {
      "type": "reco::ChannelMapService",
      "label": "channelMap",
      "channel_map_iov":"channel_map_iov.json"
    },
    {
      "type": "reco::TemplateLoaderService",
      "label": "templateLoader",
      "templates_iov": "templates_iov.json"
    },
    {
      "type": "reco::TemplateFitterService",
      "label": "templateFitter",
      "templateLoaderLabel": "templateLoader",
      "file_name":"fitters.json",
      "maxPulses":3,
      "debug":false,
      "restricted_chi2_min": -120,
      "restricted_chi2_max": 150,
      "timeoutLimit":2000000,
      "ampGuessScale":2.0,
      "minimumAmplitude": 25,
      "maximumAmplitude": 8000,
      "skipClipping":true,
      "pulseFitterMinVal":-2000,
      "pulseFitterMaxVal":2000,
      "timeBounds": 4,
      "chi2Threshold": 1,
      "keepSplines": true
    },
    {
      "type": "reco::TimeProfilerService",
      "label": "timeProfiler"
    }
  ],
  "Output": {
    "_drop": [],
    "drop": [
      "unpacker*",
      "initializer*",
      "pruned*",
      "jitter*",
      "timeAligned*",
      "pedestal*"
    ],
    "compressionLevel": 1,
    "compressionAlgorithm": 4
  }
}