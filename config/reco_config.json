{
  
  "Unpacker" : {
    "max_midas_events": 1,
    "verbosity": 0
  },
  "RecoStages": [
    {
      "recoClass": "reco::JitterCorrector",
      "recoLabel": "jitter",
      "inputRecoLabel": "unpacker",
      "inputWaveformsLabel": "WFD5WaveformCollection",
      "outputWaveformsLabel": "waveforms",
      "templateServiceLabel": "templates",
      "file_name":"pedestals.json",
      "failOnError":false,
      "debug":false
    },
    {
      "recoClass": "reco::DigitizerTimeAligner",
      "recoLabel": "timeAligned",
      "inputRecoLabel": "jitter",
      "inputWaveformsLabel": "waveforms",
      "outputWaveformsLabel": "waveforms"
    },
    {
      "recoClass": "reco::PedestalCalculator",
      "recoLabel": "pedestal",
      "inputRecoLabel": "timeAligned",
      "inputWaveformsLabel": "waveforms",
      "outputWaveformsLabel": "waveforms"
    },
    {
      "recoClass": "reco::DetectorGrouper",
      "recoLabel": "grouped",
      "inputRecoLabel": "pedestal",
      "inputWaveformsLabel": "waveforms",
      "outputWaveformsBaseLabel": "waveforms",
      "channelMapServiceLabel": "channelMap"
    },
    {
      "recoClass": "reco::Fitter",
      "recoLabel": "xtalFitter",
      "inputRecoLabel": "grouped",
      "inputWaveformsLabel": "waveformsXtal",
      "outputFitResultLabel": "fitResults",
      "templateFitterLabel": "templateFitter",
      "debug": false
    },
    {
      "recoClass": "reco::RFFitter",
      "recoLabel": "RFFitter",
      "inputRecoLabel": "grouped",
      "inputWaveformsLabel": "waveformsRF",
      "outputFitResultLabel": "RFfitResults",
      "fitStartTime": 200,
      "fitEndTime": 800
    },
    {
      "recoClass": "reco::PulseIntegrator",
      "recoLabel": "xtalIntegrator",
      "inputRecoLabel": "grouped",
      "inputWaveformsLabel": "waveformsXtal",
      "outputIntegralsLabel": "Integrals"
    },
    {
      "recoClass": "reco::PeakIdentifier",
      "recoLabel": "xtalPeakIdentifier",
      "inputRecoLabel": "grouped",
      "inputWaveformsLabel": "waveformsXtal",
      "outputPeaksLabel": "Peaks"
    },
    {
      "recoClass": "reco::CaloClusterFinder",
      "recoLabel": "xtalCaloClusterFinder",
      "inputRecoLabel": "xtalFitter",
      "inputfitResultsLabel": "fitResults",
      "outputCaloClusterLabel": "CaloClusters"
    },
    {
      "recoClass": "reco::XYPositionFinder",
      "recoLabel": "xtalXYPositionFinder",
      "inputRecoLabel": "xtalFitter",
      "inputfitResultsLabel": "fitResults",
      "outputPositionLabel": "XYPositions"
    }
  ],
  "RecoPath":[
    "jitter",
    "timeAligned",
    "pedestal",
    "grouped",
    "RFFitter"
    ],
  "Services": [
    {
      "type": "reco::ChannelMapService",
      "label": "channelMap",
      "config_files":{
        "config_file_0":{"file":"g-2_channel_map.json", "iov":[10000,30000]},
        "config_file_1":{"file":"lyso_2023.json", "iov":[0,3000]}
        
      }
    },
    {
      "type": "reco::TemplateLoaderService",
      "label": "templateLoader",
      "file_name": "templates.json"
    },
    {
      "type": "reco::TemplateFitterService",
      "label": "templateFitter",
      "templateLoaderLabel": "templateLoader",
      "file_name":"fitters.json",
      "maxPulses":3,
      "debug":false,
      "restricted_chi2_min": -120,
      "restricted_chi2_max": 150,
      "timeoutLimit":2000000,
      "ampGuessScale":2.0,
      "makeAlignedTree": false,
      "minimumAmplitude": 10,
      "maximumAmplitude": 8000,
      "traceMinVal":-8000,
      "traceMaxVal":8000,
      "skipClipping":false,
      "pulseFitterMinVal":-2000,
      "pulseFitterMaxVal":2000,
      "fit_laser_1":true,
      "fit_laser_2":true,
      "timeBounds": 4,
      "chi2Threshold": 1,
      "keepSplines": true
    }
  ],
  "Output": {
    "drop": [],
    "_drop": [
      "unpacker*"
    ]
  }
}